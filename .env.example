# Environment Configuration for Simplified Micromanager
# Copy this file to .env and fill in your values

# ===========================================
# N8N WEBHOOK CONFIGURATION (REQUIRED)
# ===========================================
# Primary webhook URL where raw POS data will be sent
N8N_WEBHOOK_URL=https://n8n-vcni0-u35184.vm.elestio.app/webhook/parse-pos-line

# ===========================================
# DEVICE CONFIGURATION
# ===========================================
# Human-readable device name (also used as camera name in n8n)
DEVICE_NAME=POS Terminal 101

# POS system type for processing logic in n8n
POS_TYPE=verifone_commander

# Serial port configuration
SERIAL_PORT=/dev/ttyUSB0
SERIAL_BAUD_RATE=9600

# ===========================================
# FRIGATE NVR CONFIGURATION
# ===========================================
# Frigate NVR URL for video correlation with POS transactions
# Use local Frigate by default; override as needed
FRIGATE_URL=http://127.0.0.1:5000/
# App uses FRIGATE_BASE; DeviceInitializer reads FRIGATE_URL
FRIGATE_BASE=http://127.0.0.1:5000

# ===========================================
# WEBHOOK RETRY CONFIGURATION
# ===========================================
# Number of retry attempts for failed webhook calls
RETRY_ATTEMPTS=3

# Initial retry delay in milliseconds (exponential backoff)
RETRY_DELAY_MS=1000

# ===========================================
# LOGGING CONFIGURATION
# ===========================================
LOG_LEVEL=info

# ===========================================
# OPTIONAL HEALTH CHECK SERVER
# ===========================================
# Set to true to enable HTTP health check endpoint
ENABLE_HEALTH_SERVER=false
HEALTH_CHECK_PORT=3000

# ===========================================
# LOCAL BACKUP CONFIGURATION
# ===========================================
# Local backup is always enabled for data safety
# These settings control cleanup behavior
BACKUP_RETENTION_DAYS=30
BACKUP_LOG_DIRECTORY=./transaction-logs

# ===========================================
# DEVELOPMENT/TESTING
# ===========================================
# Set to 'development' for more verbose logging
NODE_ENV=production

# For testing without actual hardware
MOCK_SERIAL_DATA=false
MOCK_FRIGATE_API=false

# ===========================================
# POSTING MODE (LINES)
# ===========================================
# Default is single-line posting for realtime updates
POST_LINES_AS_BATCH=false

# ===========================================
# OPTIONAL: ALERT CONFIGURATION
# ===========================================
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...
# EMAIL_ALERTS_TO=admin@yourstore.com
# ALERT_ON_PARSE_ERRORS=true
# ALERT_ON_CONNECTION_LOSS=true
